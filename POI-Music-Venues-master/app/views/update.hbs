{{> mainmenu _id="venue"}}

<section class="ui raised segment">
    <div class="ui grid">
        <div class="ui ten wide column">
            <div class="ui stacked fluid form segment">
                {{#each venue}}
                <form action="/venue/update/{{pois.0._id}}" method="POST">
                    <h3 class="ui header">Edit Venue</h3>
                    <div class="two fields">
                        <div class="field">
                            <label>Name</label>
                            <input value="{{pois.0.name}}" type="text" name="name">
                        </div>
                        <div class="field">
                            <label>Location</label>
                            <input value="{{pois.0.location}}" type="text" name="location">
                        </div>
                    </div>
                        <div class="field">
                        <label>Website</label>
                        <input value="{{pois.0.website}}" type="text" name="website">
                    </div>
                    <div class="two fields">
                        <div class="field">
                            <label>Latitude</label>
                            <input value="{{pois.0.geo.lat}}" type="number" name="lat" step="0.000001">
                        </div>
                        <div class="field">
                            <label>Longitude</label>
                            <input value="{{pois.0.geo.long}}" type="number" name="long" step="0.000001">
                        </div>
                    </div>
                    <div class="field">
                        <label>Description</label>
                        <textarea name="description">{{pois.0.description}}</textarea>
                    </div>
                    <input id="image_main" type="hidden" value="{{pois.0.imageMain}}" name="imageMain">
                    <input id="image1" type="hidden" value="{{pois.0.image1}}" name="image1">
                    <input id="image2" type="hidden" value="{{pois.0.image2}}" name="image2">
                    <input id="image3" type="hidden" value="{{pois.0.image3}}" name="image3">


                    <button class="ui blue submit button">Update</button>

                </form>
            </div>
        </div>
                    <aside class="ui five wide column">
            <h3 class="ui header">Edit Images</h3>
            <img src="{{pois.0.imageMain}}" class="ui medium image" id="main_image">
            <a id="upload_main"><i class="edit outline icon"></i> Edit Main Image  </a>

            <br>
            <a href="/venue/update/{{pois.0._id}}/imageMain" onclick="return confirm('Are you sure you want to delete this picture?');"><i class="ui trash icon"></i> Delete Main Image</a>

                <img src="{{pois.0.image1}}" class="ui small image" id="display_image1">
                <a id="upload_image1"><i class="edit outline icon"></i> Edit Image 1</a>
                <br>
                <a href="/venue/update/{{pois.0._id}}/image1" onclick="return confirm('Are you sure you want to delete this picture?');"><i class="ui trash icon"></i> Delete Image 1</a>

                <img src="{{pois.0.image2}}" class="ui small image" id="display_image2">
                <a id="upload_image2"><i class="edit outline icon"></i> Edit Image 2</a>
                <br>
                <a href="/venue/update/{{pois.0._id}}/image2" onclick="return confirm('Are you sure you want to delete this picture?');"><i class="ui trash icon"></i> Delete Image 2</a>

                <img src="{{pois.0.image3}}" class="ui small image" id="display_image3">
                <a id="upload_image3"><i class="edit outline icon"></i> Edit Image 3</a>
                <br>
                <a href="/venue/update/{{pois.0._id}}/image3" onclick="return confirm('Are you sure you want to delete this picture?');"><i class="ui trash icon"></i> Delete Image 3</a>


                    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

                <script type="text/javascript">
                var myWidgetMain = cloudinary.createUploadWidget({
                            cloudName: 'izzofinno',
                            uploadPreset: 'venues'}, (error, result) => {
                            if (!error && result && result.event === "success") {

                                var imageUrl = result.info.secure_url;
                                document.getElementById("image_main").value = imageUrl;
                                document.getElementById("main_image").src = imageUrl;

                            }
                        }
                )

                document.getElementById("upload_main").addEventListener("click", function(){
                    myWidgetMain.open();

                }, false);

                var myWidgetImage1 = cloudinary.createUploadWidget({
                            cloudName: 'izzofinno',
                            uploadPreset: 'venues'}, (error, result) => {
                            if (!error && result && result.event === "success") {

                                var imageUrl = result.info.secure_url;
                                document.getElementById("image1").value = imageUrl;
                                document.getElementById("display_image1").src = imageUrl;

                            }
                        }
                )

                document.getElementById("upload_image1").addEventListener("click", function(){
                    myWidgetImage1.open();

                }, false);

                var myWidgetImage2 = cloudinary.createUploadWidget({
                            cloudName: 'izzofinno',
                            uploadPreset: 'venues'}, (error, result) => {
                            if (!error && result && result.event === "success") {

                                var imageUrl = result.info.secure_url;
                                document.getElementById("image2").value = imageUrl;
                                document.getElementById("display_image2").src = imageUrl;

                            }
                        }
                )

                document.getElementById("upload_image2").addEventListener("click", function(){
                    myWidgetImage2.open();

                }, false);


                var myWidgetImage3 = cloudinary.createUploadWidget({
                            cloudName: 'izzofinno',
                            uploadPreset: 'venues'}, (error, result) => {
                            if (!error && result && result.event === "success") {

                                var imageUrl = result.info.secure_url;
                                document.getElementById("image3").value = imageUrl;
                                document.getElementById("display_image3").src = imageUrl;

                            }
                        }
                )

                document.getElementById("upload_image3").addEventListener("click", function(){
                    myWidgetImage3.open();

                }, false);

                </script>

        </aside>

    </div>
                {{/each}}
        {{> error}}
</section>